# PROMPT 13 â€” TASKS + TIMELOGS

# Golden Rules (DO NOT BREAK)
1) Do not move/rename folders. Only add files in specified paths.
2) Pages must stay thin: NO direct fetch in pages. All network calls go via `src/api/repositories/*`.
3) All popups use existing hosts:
   - Modal: `src/components/ui/Modal.tsx`
   - Confirm: `src/components/ui/ConfirmDialog.tsx`
   - Toast: `src/components/ui/Toast.tsx`
4) Reuse UI primitives from `src/components/ui/*` (Button/Input/Card).
5) UI role gating is only for UX; backend remains the source of truth.
6) Every table must support: loading, empty state, error state, pagination.
7) Use exact NSwag function + DTO names from your `apiClient.ts`.
8) For any dropdown (branches, customers, parts, locations), load once and cache in `src/api/lookups/*`.
9) DO NOT invent endpoints. If apiClient.ts has no PUT/PATCH/DELETE for an entity, hide Edit/Delete.


## APIs
Tasks:
- `tasks(jobCardId)` -> `JobTaskResponseIReadOnlyListApiResponse`
- `jobtasks(body?: JobTaskCreateRequest)` -> `JobTaskResponseApiResponse`
- `start2(id, body?: JobTaskStartRequest)` -> `JobTaskResponseApiResponse`
- `stop2(id, body?: JobTaskStopRequest)` -> `JobTaskResponseApiResponse`

Time logs:
- Start timelog: `start(id, body?: StartTimeLogRequest)` -> `TimeLogResponseApiResponse`
- Stop timelog: `stop(id, body?: StopTimeLogRequest)` -> `TimeLogResponseApiResponse`
- List timelogs (by task id): `timelogs(id)` -> `TimeLogResponseIReadOnlyListApiResponse`

## Files
- `src/api/repositories/tasksRepo.ts`
- `src/features/jobcards/tabs/TasksTab.tsx`

## Tasks table columns
- stationCode
- title
- status
- startedAt
- endedAt
- totalMinutes

## Row actions
- Start task, Stop task
- View timelogs (opens modal/popup with timelogs list)

Create Task modal (JobTaskCreateRequest)
- stationCode: Select/text required
- title: text required
- notes: textarea optional

Timelogs modal (read-only table)
Columns:
- startedAt
- endedAt
- minutes
- createdBy

## Test
- Start/stop task works
- Timelogs list shows entries

